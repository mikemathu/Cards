onmessage = (event) => {
    if (event.data !== undefined) {
        ("use strict");
        var xhr = new XMLHttpRequest();
        xhr.open(event.data.method, event.data.url, !0);
        xhr.setRequestHeader("Content-type", "application/json;");
        xhr.setRequestHeader("RequestVerificationToken", event.data.token);
        xhr.setRequestHeader("x-Requested-With", "XMLHttpRequest");
        xhr.setRequestHeader("accept", "application/json, text/javascript, */*; q=0.01");
        xhr.responseType = "text";
        xhr.timeout = 12e5;
        xhr.onloadend = () => {
            if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                    try {
                        let responseData = JSON.parse(xhr.response);
                        postMessage({ status: true, response: responseData });
                    } catch (error) {
                        postMessage({ status: false, response: "Network Error. Please Contact Your Administrator.", isNetworkError: true });
                    }
                } else if (xhr.status === 401) {
                    postMessage({ status: false, response: xhr.response, code: 401 });
                } else if (xhr.status === 403) {
                    postMessage({ status: false, response: "Access Forbidden. You don't have permission to access this resource." });
                } else if (xhr.status === 500 && event.data.method === "POST") {
                    postMessage({ status: false, response: "Server Error. Please Contact Admin." });
                } else if (event.data.method === "POST") {
                    postMessage({ status: false, response: xhr.response });
                } else {
                    postMessage({ status: true, response: null });
                }
            }

        };
        xhr.onerror = () => {
            postMessage({ status: false, response: "Network Error. Please Contact Your Administrator.", isNetworkError: true });
        };
        xhr.ontimeout = () => {
            postMessage({ status: false, response: "Connection Timeout. Please Try Again.", isNetworkError: true });
        };
        xhr.send(JSON.stringify(event.data.data));
    }
};
